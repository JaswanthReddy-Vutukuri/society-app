(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{220:function(e,t,a){e.exports=a(415)},229:function(e,t,a){},413:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},414:function(e,t,a){},415:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),l=a.n(s),o=a(57),i=a(200),c=a(202),u=a(22),m=(a(229),a(14)),p=a(15),d=a(17),h=a(16),f=a(18),E=a(62),g=a(422),y="https://api.magunta.in/api",b=new g.a(JSON.parse(localStorage.getItem("currentUser"))),v={login:function(e,t){var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})};return fetch("".concat(y,"/login/authenticate"),a).then(R).then(function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),b.next(e),e})},logout:function(){localStorage.removeItem("currentUser"),b.next(null)},loginAsUser:function(e){return localStorage.setItem("currentUser",JSON.stringify(e)),b.next(e),e},currentUser:b.asObservable(),get currentUserValue(){return b.value}};var I={createUser:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/User/Add"),t).then(R).then(function(e){return e})},getUsers:function(){return fetch("".concat(y,"/User/GetAll"),{method:"GET"}).then(R).then(function(e){return e})},getUsersByRole:function(e){return fetch("".concat(y,"/User/GetUsersBasedOnRole?Role=").concat(e),{method:"GET"}).then(R).then(function(e){return e})}};var k={createRequest:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/Save"),t).then(R).then(function(e){return e})},getRequestCounts:function(e){return fetch("".concat(y,"/Requests/GetCount?userID=").concat(e),{method:"GET"}).then(R).then(function(e){return e})},getRequests:function(e){var t={UserID:JSON.parse(localStorage.getItem("currentUser")).UserID,Index:e.index?e.index:null,Count:e.count?e.count:null,SortType:e.sortType?e.sortType:null,SortBy:e.sortBy?e.sortBy:null,VillageID:e.villageID?e.villageID:null,ConstituencyID:e.ConstituencyID?e.ConstituencyID:null,MandalID:e.MandalID?e.MandalID:null,DistrictID:e.DistrictID?e.DistrictID:null,TicketNumber:e.TicketNumber?e.TicketNumber:null,InActive:!!e.InActive&&e.InActive};t.Status=e.reqStatus&&!e.Status?JSON.parse(localStorage.getItem("currentUser")).Role.substring(0,3)+"_"+e.reqStatus:e.Status,t.Role=e.Role?e.reqStatus:JSON.parse(localStorage.getItem("currentUser")).Role;var a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};return fetch("".concat(y,"/Requests/GetList"),a).then(R).then(function(e){return e})},SaveEmployeeFeedback:function(e){e.CreatedbyUserID=JSON.parse(localStorage.getItem("currentUser")).UserID;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/SaveEmployeeFeedback"),t).then(R).then(function(e){return e})},SaveRepresentativeFeedback:function(e){e.CreatedUserID=JSON.parse(localStorage.getItem("currentUser")).UserID;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/SaveRepresentativeFeedback"),t).then(R).then(function(e){return e})},SaveInchargeFeedback:function(e){e.CreatedUserID=JSON.parse(localStorage.getItem("currentUser")).UserID;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/SaveInchargeFeedback"),t).then(R).then(function(e){return e})},SaveAdminFeedback:function(e){e.AssignedUserID=JSON.parse(localStorage.getItem("currentUser")).UserID;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/AssignRequestToSponsor"),t).then(R).then(function(e){return e})},SaveRepresentativeComments:function(e){e.CreatedUserID=JSON.parse(localStorage.getItem("currentUser")).UserID;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(y,"/Requests/SaveRepresentativeComment"),t).then(R).then(function(e){return e})}};var S={getDistricts:function(){return fetch("".concat(y,"/MasterData/GetDistricts"),{method:"GET"}).then(R).then(function(e){return e})},getMandals:function(e){return fetch("".concat(y,"/MasterData/GetMandals?districtID=").concat(e),{method:"GET"}).then(R).then(function(e){return e})},getVillages:function(e){return fetch("".concat(y,"/MasterData/GetVillages?mandalID=").concat(e),{method:"GET"}).then(R).then(function(e){return e})},getConstituencies:function(){return fetch("".concat(y,"/MasterData/GetConstituencies"),{method:"GET"}).then(R).then(function(e){return e})},getRoles:function(){return fetch("".concat(y,"/MasterData/GetRoles"),{method:"GET"}).then(R).then(function(e){return e})},getQuestions:function(){var e=JSON.parse(localStorage.getItem("currentUser")).Role;return fetch("".concat(y,"/MasterData/GetQuestions?RoleName=").concat(e),{method:"GET"}).then(R).then(function(e){return e})}};function R(e){return e.text().then(function(t){var a=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&v.logout();var n=a&&a.message||e.statusText;return Promise.reject(n)}return a})}var C=a(35),O=Object(C.a)(),q=(a(95),a(86)),D=a(47),A=a(430),N=a(11),w=a(23),U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={total:null,approved:null,pending:null,declined:null},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;k.getRequestCounts(this.props.currentUser.UserID).then(function(t){e.setState({total:t.Total,approved:t.Approved,pending:t.Pending,declined:t.Declined,inactive:t.InActive})},function(e){console.log("Error while fetching Request Counts:",e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(q.a,{gutter:16},r.a.createElement(D.a,{span:4},r.a.createElement(w.a,{to:"/total"},r.a.createElement(A.a,{title:"TOTAL",className:"req-card",style:{background:"#0000ff5c",cursor:"pointer"}},r.a.createElement("span",{className:"req-value"},this.state.total,r.a.createElement(N.a,{type:"swap",className:"req-icon"}))))),r.a.createElement(D.a,{span:5},r.a.createElement(w.a,{to:"/approved"},r.a.createElement(A.a,{title:"APPROVED",className:"req-card",style:{background:"#318a315e",cursor:"pointer"}},r.a.createElement("span",{className:"req-value"},this.state.approved,r.a.createElement(N.a,{type:"check",className:"req-icon"}))))),r.a.createElement(D.a,{span:5},r.a.createElement(w.a,{to:"/pending"},r.a.createElement(A.a,{title:"PENDING",className:"req-card",style:{background:"#f3ab249e",cursor:"pointer"}},r.a.createElement("span",{className:"req-value"},this.state.pending,r.a.createElement(N.a,{type:"warning",className:"req-icon"}))))),r.a.createElement(D.a,{span:5},r.a.createElement(w.a,{to:"/declined"},r.a.createElement(A.a,{title:"DECLINED",className:"req-card",style:{background:"#ff9999",cursor:"pointer"}},r.a.createElement("span",{className:"req-value"},this.state.declined,r.a.createElement(N.a,{type:"dislike",className:"req-icon"}))))),r.a.createElement(D.a,{span:5},r.a.createElement(w.a,{to:""},r.a.createElement(A.a,{title:"INACTIVE",className:"req-card",style:{background:"lightgrey",cursor:"pointer"}},r.a.createElement("span",{className:"req-value"},this.state.inactive,r.a.createElement(N.a,{type:"swap",className:"req-icon"})))))))}}]),t}(r.a.Component),T=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(U),F=a(75),P=a(417),x=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null),r.a.createElement(F.Chart,{height:400,data:[{month:"Jan.",count:69,city:"tokyo"},{month:"Feb.",count:29,city:"tokyo"},{month:"Mar.",count:49,city:"tokyo"},{month:"Apr.",count:39,city:"tokyo"},{month:"May.",count:89,city:"tokyo"},{month:"Jun.",count:69,city:"tokyo"},{month:"Jul.",count:59,city:"tokyo"},{month:"Aug.",count:79,city:"tokyo"},{month:"Sep.",count:69,city:"tokyo"},{month:"Oct.",count:39,city:"tokyo"},{month:"Nov.",count:19,city:"tokyo"},{month:"Dec.",count:49,city:"tokyo"}],scale:{month:{alias:"Month"},count:{alias:"Requests"}},forceFit:!0},r.a.createElement(F.Axis,{title:!0,name:"month"}),r.a.createElement(F.Axis,{title:!0,name:"count"}),r.a.createElement(F.Legend,null),r.a.createElement(F.Tooltip,{crosshairs:{type:"rect"}}),r.a.createElement(F.Geom,{type:"interval",position:"month*count",color:"month"})))}}]),t}(r.a.Component),j=a(426),M=a(93),L=a(420),V=a(428),B=a(118),G=a(421),J=a(83),_=a(38),H=a(424),z=j.a.TextArea,Q=M.a.Option,W=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,visible:!1,districts:[],constituencies:[],mandals:[],villages:[],spinning:!1,benefits:""},a.showModal=function(){a.setState({visible:!0})},a.handleOk=function(){a.setState({visible:!1}),a.props.form.resetFields()},a.handleCancel=function(){a.setState({visible:!1})},a.onBenefitChange=function(e){console.log("benefits:",e.target.value),a.setState({benefits:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(t.MobileNumber="+"+t.prefix+t.MobileNumber,t.Status="New",a.setState({spinning:!0}),k.createRequest(t).then(function(e){a.setState({ModalText:"Request raised successfully. Your Ticket Number: ".concat(e),spinning:!1}),a.showModal()},function(e){a.setState({ModalText:"Sorry! Failed to raise the request. Try Again.",spinning:!1}),a.showModal()}))})},a.onDistrictChange=function(e){console.log("distict:",e),S.getMandals(e).then(function(e){a.setState({mandals:e})},function(e){console.log("Error while fetching Mandals:",e)})},a.onMandalChange=function(e){S.getVillages(e).then(function(e){a.setState({villages:e})},function(e){console.log("Error while fetching Villages:",e)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.getDistricts().then(function(t){e.setState({districts:t})},function(e){console.log("Error while fetching Districts:",e)}),S.getConstituencies().then(function(t){e.setState({constituencies:t})},function(e){console.log("Error while fetching Constituencies:",e)}),this.onDistrictChange(9)}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.ModalText,s=this.props.form.getFieldDecorator,l={wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:4}}},o=s("prefix",{initialValue:"91"})(r.a.createElement(M.a,{style:{width:70}},r.a.createElement(Q,{value:"91"},"+91"),r.a.createElement(Q,{value:"97"},"+97")));return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,Object.assign({},{labelCol:{lg:{span:4},xs:{span:24},sm:{span:8}},wrapperCol:{lg:{span:10},xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement("h2",null," Request Form"),r.a.createElement(P.a,null),r.a.createElement(L.a.Item,{label:"District",hasFeedback:!0},s("DistrictID",{initialValue:9,rules:[{required:!0,message:"Please select district!"}]})(r.a.createElement(M.a,{placeholder:"Please select a district",showSearch:!0,onChange:this.onDistrictChange,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.districts.map(function(e){return r.a.createElement(Q,{key:e.DistrictID,value:e.DistrictID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Constituency",hasFeedback:!0},s("ConstituencyID",{rules:[{required:!0,message:"Please select constituency!"}]})(r.a.createElement(M.a,{placeholder:"Please select a constituency",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.constituencies.map(function(e){return r.a.createElement(Q,{key:e.ConstituencyID,value:e.ConstituencyID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Mandal",hasFeedback:!0},s("MandalID",{rules:[{required:!0,message:"Please select mandal!"}]})(r.a.createElement(M.a,{placeholder:"Please select a mandal",onChange:this.onMandalChange,showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.mandals.map(function(e){return r.a.createElement(Q,{key:e.MandalID,value:e.MandalID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Village",hasFeedback:!0},s("VillageID",{rules:[{required:!0,message:"Please select village!"}]})(r.a.createElement(M.a,{placeholder:"Please select a village",showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.villages.map(function(e){return r.a.createElement(Q,{key:e.VillageID,value:e.VillageID},e.Name)})))),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Name")},s("Name",{rules:[{required:!0,message:"Please input your name!",whitespace:!0}]})(r.a.createElement(j.a,null))),r.a.createElement(L.a.Item,{label:"Age"},s("Age",{rules:[{required:!0,message:"Please provide Age!"}]})(r.a.createElement(V.a,null)),r.a.createElement("span",{className:"ant-form-text"}," Years ")),r.a.createElement(L.a.Item,{label:"Phone Number"},s("MobileNumber",{rules:[{required:!0,message:"Please input your phone number!"}]})(r.a.createElement(j.a,{addonBefore:o,style:{width:"100%"}}))),r.a.createElement(L.a.Item,{label:"E-mail"},s("EmailAddress",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!1,message:"Please input your E-mail!"}]})(r.a.createElement(j.a,null))),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Address")},s("Address",{rules:[{required:!1,message:"Please input your address!",whitespace:!0}]})(r.a.createElement(z,{rows:4}))),r.a.createElement(L.a.Item,{label:"Benefits"},s("IssueCategory",{rules:[{required:!0,message:"Please input beneficiaries!"}]})(r.a.createElement(B.a.Group,{onChange:this.onBenefitChange},r.a.createElement(B.a,{value:"Person"},"Person"),r.a.createElement(B.a,{value:"People"},"People")))),"People"==this.state.benefits?r.a.createElement(L.a.Item,{label:"No. of Beneficiaries"},s("EstimatedPeopleBenfit",{rules:[{required:!1,message:"Please provide No. of Beneficiaries!"}]})(r.a.createElement(V.a,null))):null,r.a.createElement(L.a.Item,{label:"Estimated Budget"},s("Estimatedbudget",{rules:[{required:!1,message:"Please provide Budget!"}]})(r.a.createElement(V.a,null)),r.a.createElement("span",{className:"ant-form-text"}," Rupees ")),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Brief Description")},s("Description",{rules:[{required:!0,message:"Please input your description!",whitespace:!0}]})(r.a.createElement(z,{rows:4}))),r.a.createElement(L.a.Item,{label:"Upload Relevant Docs"},r.a.createElement("div",{className:"dropbox"},s("Documents",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(G.a.Dragger,{name:"files",action:"".concat(y,"/Requests/PostFormData")},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(N.a,{type:"inbox"})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Supports single or bulk upload"))))),r.a.createElement(L.a.Item,l,s("Agreed",{valuePropName:"checked"})(r.a.createElement(J.a,null,"I confirm all the above information provided is true upto my knowledge"))),r.a.createElement(L.a.Item,l,r.a.createElement(_.a,{type:"secondary",onClick:function(t){e.props.form.resetFields()},style:{marginRight:"15px"},disabled:this.state.spinning},"CLEAR"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},"SUBMIT"))),r.a.createElement(H.a,{title:"Request Status",visible:a,onOk:this.handleOk,onCancel:this.handleCancel},r.a.createElement("p",null,n)))}}]),t}(r.a.Component),Y=L.a.create({name:"validate_other"})(W),K=Object(u.b)(function(e){return{}},function(e){return{}})(Y),X=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(function(e){switch(e.currentUser.Role){case"USER":return r.a.createElement(K,null);case"EMPLOYEE":case"INCHARGE":case"REPRESENTATIVE":case"SPONSORSHIP":case"ADMIN":return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement(x,null));default:return r.a.createElement("h2",null," Default ")}}),Z=a(418),$=a(158),ee=a(117),te="GET_CURRENT_USER",ae="SET_CURRENT_USER",ne="LOG_OUT",re=function(e){return{type:"SET_REQUESTS_COUNT",requestsCount:e}},se=function(e){return{type:"SET_REQUESTS",requests:e}},le=Z.a.Header,oe=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement($.b,{onClick:function(t){"0"===t.key&&(v.logout(),O.push("/login"),e.props.logOut())}},r.a.createElement($.b.Item,{key:"0"},r.a.createElement("span",null," Log Out ")));return r.a.createElement(le,{className:"header"},r.a.createElement("div",{className:"logo"}),r.a.createElement(ee.a.Button,{className:"user-btn",overlay:t,icon:r.a.createElement(N.a,{type:"user"})},r.a.createElement("span",{style:{textTransform:"capitalize"}},this.props.currentUser.FirstName+" "+this.props.currentUser.LastName)),r.a.createElement($.b,{theme:"dark",mode:"horizontal",style:{lineHeight:"64px"}}))}}]),t}(r.a.Component),ie=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{logOut:function(){e({type:ne,currentUser:null})}}})(oe),ce=Z.a.Sider,ue=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.location,t=(r.a.createElement(ce,{width:200,style:{background:"#fff"}},r.a.createElement($.b,{mode:"inline",defaultSelectedKeys:["/"],selectedKeys:[e.pathname],className:"main-menu"},r.a.createElement($.b.Item,{key:"/"},r.a.createElement(w.a,{to:"/"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"history"}),"About"))),r.a.createElement($.b.Item,{key:"/new-request"},r.a.createElement(w.a,{to:"/new-request"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"form"}),"Create Request"))),r.a.createElement($.b.Item,{key:"/track-request"},r.a.createElement(w.a,{to:"/track-request"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"form"}),"Track Request"))))),r.a.createElement(ce,{width:200,style:{background:"#fff"}},r.a.createElement($.b,{mode:"inline",defaultSelectedKeys:["/"],selectedKeys:[e.pathname],className:"main-menu"},r.a.createElement($.b.Item,{key:"/"},r.a.createElement(w.a,{to:"/"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"dashboard"}),"Dashboard"))),r.a.createElement($.b.Item,{key:"/total"},r.a.createElement(w.a,{to:"/total"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"unordered-list"}),"Total Requests"))),r.a.createElement($.b.Item,{key:"/approved"},r.a.createElement(w.a,{to:"/approved"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"check-circle"}),"Approved Requests"))),r.a.createElement($.b.Item,{key:"/declined"},r.a.createElement(w.a,{to:"/declined"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"dislike"}),"Declined Requests"))),r.a.createElement($.b.Item,{key:"/pending"},r.a.createElement(w.a,{to:"/pending"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"exclamation-circle"}),"Pending Requests")))))),a=r.a.createElement(ce,{width:200,style:{background:"#fff"}},r.a.createElement($.b,{mode:"inline",defaultSelectedKeys:["/"],selectedKeys:[e.pathname],className:"main-menu"},r.a.createElement($.b.Item,{key:"/"},r.a.createElement(w.a,{to:"/"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"dashboard"}),"Dashboard"))),r.a.createElement($.b.Item,{key:"/total"},r.a.createElement(w.a,{to:"/total"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"unordered-list"}),"Total Requests"))),r.a.createElement($.b.Item,{key:"/approved"},r.a.createElement(w.a,{to:"/approved"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"check-circle"}),"Approved Requests"))),r.a.createElement($.b.Item,{key:"/declined"},r.a.createElement(w.a,{to:"/declined"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"dislike"}),"Declined Requests"))),r.a.createElement($.b.Item,{key:"/pending"},r.a.createElement(w.a,{to:"/pending"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"exclamation-circle"}),"Pending Requests"))),r.a.createElement($.b.Item,{key:"/create-user"},r.a.createElement(w.a,{to:"/create-user"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"edit"}),"Create User"))),r.a.createElement($.b.Item,{key:"/show-users"},r.a.createElement(w.a,{to:"/show-users"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"unordered-list"}),"Users List"))),r.a.createElement($.b.Item,{key:"/track-request"},r.a.createElement(w.a,{to:"/track-request"},r.a.createElement("span",null,r.a.createElement(N.a,{type:"form"}),"Track Request")))));switch(this.props.currentUser.Role){case"USER":return r.a.createElement(r.a.Fragment,null);case"EMPLOYEE":case"INCHARGE":case"REPRESENTATIVE":case"SPONSORSHIP":return r.a.createElement(r.a.Fragment,null,t);case"ADMIN":return r.a.createElement(r.a.Fragment,null,a);default:return r.a.createElement("h1",null,"I will be no where!")}}}]),t}(r.a.Component),me=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(Object(E.g)(ue)),pe=a(58),de=a(215),he=a(419),fe=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.fetchFile=function(e,t){console.log("documentID:",e,t),window.open("".concat(y,"/Requests/GetFile?DocumentID=").concat(e,"&uid=").concat(t),"_blank")},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.request.Documents.map(function(t){return r.a.createElement("li",{style:{color:"#1890ff",cursor:"pointer"},key:t.name,onClick:function(a){return e.fetchFile(t.DocumentID,t.uid)}},t.name)});return console.log("request:",this.props.request),r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(L.a.Item,{label:"District"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.District)),r.a.createElement(L.a.Item,{label:"Constituency"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.District)),r.a.createElement(L.a.Item,{label:"Mandal"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Mandal)),r.a.createElement(L.a.Item,{label:"Village"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Village)),r.a.createElement(L.a.Item,{label:"Benefits"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.IssueCategory)),r.a.createElement(L.a.Item,{label:"Estimated Budget"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Estimatedbudget," Rupees")),null==this.props.request.EstimatedPeopleBenfit?null:r.a.createElement(L.a.Item,{label:"Est. People Benfit"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.EstimatedPeopleBenfit," Rupees")),r.a.createElement(L.a.Item,{label:"Request Description"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Description)),r.a.createElement(L.a.Item,{label:"Request By"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Name)),r.a.createElement(L.a.Item,{label:"Age"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Age)),r.a.createElement(L.a.Item,{label:"Email ID"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.EmailAddress)),r.a.createElement(L.a.Item,{label:"Mobile"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.MobileNumber)),r.a.createElement(L.a.Item,{label:"Address"},r.a.createElement("span",{className:"ant-form-text"},this.props.request.Address)),r.a.createElement(L.a.Item,{label:"Documents"},r.a.createElement("span",{className:"ant-form-text"},r.a.createElement("ul",{style:{listStyleType:"none"}},this.props.request.Documents?t:null))),r.a.createElement(L.a.Item,{wrapperCol:{span:4,offset:20}},r.a.createElement(_.a,{type:"primary",htmlType:"submit",onClick:function(t){e.props.handleOk()}},"OK")))}}]),t}(r.a.Component),Ee=L.a.create({name:"validate_other"})(fe),ge=a(429),ye=a(427),be=a(71),ve=a.n(be),Ie=M.a.Option,ke=j.a.TextArea,Se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).validateEmployeeFeedback=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e||e&&ve.a.keys(e).length<=1){console.log("Received values of form: ",t),a.setState({cantApprove:!1});var n={},r=[],s=[];a.state.questions.forEach(function(e){var a={};a.QuestionID=e.QuestionID,a.RatingValue=t[e.QuestionID],s.push(t[e.QuestionID]),r.push(a)}),n.Ratings=r,n.Description=t.Description?t.Description:null,n.RequestID=a.props.request.RequestID,console.log("reqObj:",n);var l=s.reduce(function(e,t){return e+t},0),o=s.length,i=5*o/2;console.log("ratingSum,ratingsLength,ratingAverage:",l,o,i),l<i?(n.FeedbackStatus="EMP_DECLINED",n.AssingedToInchargeID=null,a.SaveEmployeeFeedback(n)):(n.FeedbackStatus="EMP_APPROVED",t.AssingedToInchargeID?(n.AssingedToInchargeID=t.AssingedToInchargeID,a.SaveEmployeeFeedback(n)):a.setState({cantApprove:!0}))}})},a.SaveEmployeeFeedback=function(e){a.setState({spinning:!0}),k.SaveEmployeeFeedback(e).then(function(e){console.log(e),a.setState({spinning:!1}),a.props.form.resetFields(),a.props.handleOk(),ge.a.info("Comments saved successfully!")},function(e){a.setState({spinning:!1}),ge.a.error("Sorry. Please try again!"),console.log("Error while saving feedback:",e),a.props.form.resetFields(),a.props.handleOk()})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.state={questions:[],incharges:[],spinning:!1,cantApprove:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.getQuestions().then(function(t){console.log("questions:",t),e.setState({questions:t})},function(e){console.log("Error while fetching questions:",e)}),I.getUsersByRole("INCHARGE").then(function(t){console.log("incharges:",t),e.setState({incharges:t})},function(e){console.log("Error while fetching incharges:",e)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=[];if(this.state.questions)for(var n=0;n<this.state.questions.length;n++)a.push(r.a.createElement(L.a.Item,{label:this.state.questions[n].QuestionName},t(JSON.stringify(this.state.questions[n].QuestionID),{rules:[{required:!0,message:"Please provide Rating!"}]})(r.a.createElement(ye.a,null))));var s=r.a.createElement(L.a.Item,{label:"Assign Incharge",hasFeedback:!0},t("AssingedToInchargeID",{rules:[{required:!1,message:"Please select Incharge!"}]})(r.a.createElement(M.a,{placeholder:"Please select a Incharge"},this.state.incharges.map(function(e){return r.a.createElement(Ie,{key:e.UserId,value:e.UserId},e.FirstName+" "+e.LastName)})))),l=r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Remarks")},t("Description",{rules:[{required:!0,message:"Please input your Remarks!",whitespace:!0}]})(r.a.createElement(ke,{rows:4})));return r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{className:"employee-form",onSubmit:this.validateEmployeeFeedback}),a,r.a.createElement(P.a,null),l,r.a.createElement(P.a,null),s,r.a.createElement(P.a,null),this.state.cantApprove?r.a.createElement("h3",{style:{color:"brown",textAlign:"center"}},"Please assign a incharge!"):null,r.a.createElement(L.a.Item,{wrapperCol:{span:12,offset:12}},r.a.createElement(_.a,{type:"secondary",style:{marginRight:"15px"},disabled:this.state.spinning,onClick:function(t){e.props.form.resetFields(),e.props.handleCancel()}},"CANCEL"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},"SUBMIT")))}}]),t}(r.a.Component),Re=L.a.create({name:"validate_other"})(Se),Ce=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(Re),Oe=(M.a.Option,j.a.TextArea),qe=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).SaveRepFeedback=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e||e&&ve.a.keys(e).length<=1){a.setState({spinning:!0}),console.log("Received values of form: ",t);var n={};n.AssignedToInchargeID=a.props.request.InchargeFeedbacks[0].CreatedUserID,n.FeedbackStatus="REP_"+a.props.action.toUpperCase()+"D",n.RequestID=a.props.request.RequestID,n.Remarks=t.Remarks,console.log("reqObj:",n),k.SaveRepresentativeFeedback(n).then(function(e){console.log(e),a.setState({spinning:!1}),a.props.form.resetFields(),a.props.handleOk(),ge.a.info("Request has been ".concat(a.props.action,"d by you!"))},function(e){a.setState({spinning:!1}),ge.a.error("Sorry not able to Approve. Please try again!"),console.log("Error while saving feedback:",e),a.props.form.resetFields(),a.props.handleOk()})}})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.state={incharges:[],spinning:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;I.getUsersByRole("INCHARGE").then(function(t){console.log("incharges:",t),e.setState({incharges:t})},function(e){console.log("Error while fetching incharges:",e)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{className:"rep-form",onSubmit:this.SaveRepFeedback}),r.a.createElement(L.a.Item,{label:"Requested By"},r.a.createElement("span",{className:"ant-form-text"},this.props.request&&this.props.request.InchargeFeedbacks.length?this.props.request.InchargeFeedbacks[0].CreatedUser:"")),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Remarks")},t("Remarks",{rules:[{required:!0,message:"Please input your Remarks!",whitespace:!0}]})(r.a.createElement(Oe,{rows:4}))),r.a.createElement(P.a,null),r.a.createElement(L.a.Item,{wrapperCol:{span:12,offset:12}},r.a.createElement(_.a,{type:"secondary",style:{marginRight:"15px"},disabled:this.state.spinning,onClick:function(t){e.props.form.resetFields(),e.props.handleCancel()}},"CANCEL"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},this.props.action.toUpperCase())))}}]),t}(r.a.Component),De=L.a.create({name:"validate_other"})(qe),Ae=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(De),Ne=M.a.Option,we=j.a.TextArea,Ue=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).SaveInchargeFeedback=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e||e&&ve.a.keys(e).length<=1){a.setState({spinning:!0}),console.log("Received values of form: ",t);var n={};n.AssignedToRepresentativeID=t.AssignedToRepresentativeID?t.AssignedToRepresentativeID:null,n.FeedbackStatus="INC_"+a.props.action.toUpperCase()+"D",n.RequestID=a.props.request.RequestID,n.Remarks=t.Remarks,console.log("reqObj:",n),k.SaveInchargeFeedback(n).then(function(e){console.log(e),a.setState({spinning:!1}),a.props.form.resetFields(),a.props.handleOk(),ge.a.info("Request has been ".concat(a.props.action,"d by you!"))},function(e){a.setState({spinning:!1}),ge.a.error("Sorry not able to Approve. Please try again!"),console.log("Error while saving feedback:",e),a.props.form.resetFields(),a.props.handleOk()})}})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.state={spinning:!1,reps:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;I.getUsersByRole("REPRESENTATIVE").then(function(t){console.log("reps:",t),e.setState({reps:t})},function(e){console.log("Error while fetching reps:",e)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=r.a.createElement(L.a.Item,{label:"Assign Rep",hasFeedback:!0},t("AssignedToRepresentativeID",{rules:[{required:!0,message:"Please select Rep!"}]})(r.a.createElement(M.a,{placeholder:"Please select a Rep"},this.state.reps.map(function(e){return r.a.createElement(Ne,{key:e.UserId,value:e.UserId},e.FirstName+" "+e.LastName)}))));return r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{className:"rep-form",onSubmit:this.SaveInchargeFeedback}),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Remarks")},t("Remarks",{rules:[{required:!0,message:"Please input your Remarks!",whitespace:!0}]})(r.a.createElement(we,{rows:4}))),"approve"===this.props.action?a:null,r.a.createElement(P.a,null),r.a.createElement(L.a.Item,{wrapperCol:{span:12,offset:12}},r.a.createElement(_.a,{type:"secondary",style:{marginRight:"15px"},disabled:this.state.spinning,onClick:function(t){e.props.form.resetFields(),e.props.handleCancel()}},"CANCEL"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},this.props.action.toUpperCase())))}}]),t}(r.a.Component),Te=L.a.create({name:"validate_other"})(Ue),Fe=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(Te),Pe=M.a.Option,xe=(j.a.TextArea,function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).validateAdminFeedback=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);var n={};n.SponsorUserID=t.SponsorUserID,n.RequestID=a.props.request.RequestID,a.SaveAdminFeedback(n)}})},a.SaveAdminFeedback=function(e){a.setState({spinning:!0}),k.SaveAdminFeedback(e).then(function(e){console.log(e),a.setState({spinning:!1}),a.props.form.resetFields(),a.props.handleOk(),ge.a.info("Assigned successfully!")},function(e){a.setState({spinning:!1}),ge.a.error("Sorry. Please try again!"),console.log("Error while assigning sponsor:",e),a.props.form.resetFields(),a.props.handleOk()})},a.state={sponsors:[],spinning:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;I.getUsersByRole("SPONSORSHIP").then(function(t){console.log("sponsors:",t),e.setState({sponsors:t})},function(e){console.log("Error while fetching sponsors:",e)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=r.a.createElement(L.a.Item,{label:"Assign Sponsor",hasFeedback:!0},t("SponsorUserID",{rules:[{required:!0,message:"Please select Sponsor!"}]})(r.a.createElement(M.a,{placeholder:"Please select a Sponsor"},this.state.sponsors.map(function(e){return r.a.createElement(Pe,{key:e.UserId,value:e.UserId},e.FirstName+" "+e.LastName)}))));return r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{className:"admin-form",onSubmit:this.validateAdminFeedback}),a,r.a.createElement(P.a,null),r.a.createElement(L.a.Item,{wrapperCol:{span:12,offset:12}},r.a.createElement(_.a,{type:"secondary",style:{marginRight:"15px"},disabled:this.state.spinning,onClick:function(t){e.props.form.resetFields(),e.props.handleCancel()}},"CANCEL"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},"SUBMIT")))}}]),t}(r.a.Component)),je=L.a.create({name:"validate_other"})(xe),Me=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(je),Le=a(157),Ve=Le.a.TabPane,Be=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"formatDate",value:function(e){var t=new Date(e);return("00"+t.getDate()).slice(-2)+"/"+("00"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2)}},{key:"formatDocList",value:function(e){var t=this;return e.map(function(e){return r.a.createElement("li",{style:{color:"#1890ff",cursor:"pointer"},key:e.name,onClick:function(a){return t.fetchFile(e.DocumentID,e.uid)}},e.name)})}},{key:"render",value:function(){var e=this,t=[{title:"Comments By",dataIndex:"CreatedUser",key:"CreatedUser"},{title:"Comments",dataIndex:"Description",key:"Description"},{title:"Commented On",dataIndex:"CreatedDate",key:"CreatedDate",render:function(t,a){return r.a.createElement("span",null,e.formatDate(a.CreatedDate))}},{title:"Feedback Status",dataIndex:"FeedbackStatus",key:"FeedbackStatus"},{title:"Assigned To",dataIndex:"Incharge",key:"Incharge"}],a=[{title:"Comments By",dataIndex:"CreatedUser",key:"CreatedUser"},{title:"Comments",dataIndex:"Remarks",key:"Remarks"},{title:"Commented On",dataIndex:"CreatedOn",key:"CreatedOn",render:function(t,a){return r.a.createElement("span",null,e.formatDate(a.CreatedOn))}},{title:"Feedback Status",dataIndex:"FeedbackStatus",key:"FeedbackStatus"},{title:"Assigned To",dataIndex:"AssignedToRepresentative",key:"AssignedToRepresentative",render:function(e,t){return r.a.createElement("span",null,t.AssignedToRepresentative?t.AssignedToRepresentative:null)}}],n=[{title:"Comments By",dataIndex:"CreatedUser",key:"CreatedUser"},{title:"Comments",dataIndex:"Remarks",key:"Remarks"},{title:"Commented On",dataIndex:"CreatedOn",key:"CreatedOn",render:function(t,a){return r.a.createElement("span",null,e.formatDate(a.CreatedOn))}},{title:"Feedback Status",dataIndex:"FeedbackStatus",key:"FeedbackStatus"},{title:"Assigned To",dataIndex:"AssignedToIncharge",key:"AssignedToIncharge"}],s=[{title:"Request Status",dataIndex:"RequestStatus",key:"RequestStatus"},{title:"Comments",dataIndex:"Comment",key:"Comment"},{title:"Documents",dataIndex:"Documents",key:"Documents",render:function(t,a){return r.a.createElement("ul",{style:{listStyleType:"none"}},a.Documents.length?e.formatDocList(a.Documents):null)}},{title:"Commented On",dataIndex:"CreatedOn",key:"CreatedOn",render:function(t,a){return r.a.createElement("span",null,e.formatDate(a.CreatedOn))}}],l=r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.EmployeeFeedbacks,columns:t}),r.a.createElement("br",null),r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.EmployeeFeedbacks&&this.props.request.EmployeeFeedbacks.length&&this.props.request.EmployeeFeedbacks[0].Ratings,columns:[{title:"Question",dataIndex:"Question",key:"Question"},{title:"Rating",dataIndex:"RatingValue",key:"RatingValue"}]})),o=r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.InchargeFeedbacks,columns:a}),i=r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.RepresentativeFeedbacks,columns:n}),c=r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.RepresentativeComments,columns:s}),u=r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.SponsorMappings,columns:[{title:"Assigned to",dataIndex:"SponsorUser",key:"SponsorUser"},{title:"Assigned by",dataIndex:"AssignedUser",key:"AssignedUser"},{title:"Assigned On",dataIndex:"AssignedOn",key:"AssignedOn"}]});return r.a.createElement(Le.a,{defaultActiveKey:"1"},r.a.createElement(Ve,{tab:"Employee Comments",key:"1"},this.props.request.EmployeeFeedbacks&&this.props.request.EmployeeFeedbacks.length?l:r.a.createElement("h4",{style:{textAlign:"center"}},"No Comments Available")),r.a.createElement(Ve,{tab:"Incharge Comments",key:"2"},this.props.request.InchargeFeedbacks&&this.props.request.InchargeFeedbacks.length?o:r.a.createElement("h4",{style:{textAlign:"center"}},"No Comments Available")),r.a.createElement(Ve,{tab:"Representative Comments",key:"3"},this.props.request.RepresentativeFeedbacks&&this.props.request.RepresentativeFeedbacks.length?i:r.a.createElement("h4",{style:{textAlign:"center"}},"No Comments Available")),r.a.createElement(Ve,{tab:"Representative Actions",key:"4"},this.props.request.RepresentativeComments&&this.props.request.RepresentativeComments.length?c:r.a.createElement("h4",{style:{textAlign:"center"}},"No Actions Available")),r.a.createElement(Ve,{tab:"Sponsor Mappings",key:"5"},this.props.request.SponsorMappings&&this.props.request.SponsorMappings.length?u:r.a.createElement("h4",{style:{textAlign:"center"}},"No Mappings Available")))}}]),t}(r.a.Component),Ge=M.a.Option,Je=j.a.TextArea,_e=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(a.setState({spinning:!0}),console.log("Received values of form: ",t),t.RequestID=a.props.request.RequestID,k.SaveRepresentativeComments(t).then(function(e){console.log(e),a.setState({spinning:!1}),a.props.form.resetFields(),a.props.handleOk(),ge.a.info("Added Status!")},function(e){a.setState({spinning:!1}),ge.a.error("Sorry not able to Act. Please try again!"),console.log("Error while saving comments:",e),a.props.form.resetFields(),a.props.handleOk()}))})},a.state={spinning:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"formatDate",value:function(e){var t=new Date(e);return("00"+t.getDate()).slice(-2)+"/"+("00"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+("00"+t.getHours()).slice(-2)+":"+("00"+t.getMinutes()).slice(-2)+":"+("00"+t.getSeconds()).slice(-2)}},{key:"formatDocList",value:function(e){var t=this;return e.map(function(e){return r.a.createElement("li",{style:{color:"#1890ff",cursor:"pointer"},key:e.name,onClick:function(a){return t.fetchFile(e.DocumentID,e.uid)}},e.name)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=[{title:"Request Status",dataIndex:"RequestStatus",key:"RequestStatus"},{title:"Comments",dataIndex:"Comment",key:"Comment"},{title:"Documents",dataIndex:"Documents",key:"Documents",render:function(t,a){return r.a.createElement("ul",{style:{listStyleType:"none"}},a.Documents.length?e.formatDocList(a.Documents):null)}},{title:"Commented On",dataIndex:"CreatedOn",key:"CreatedOn",render:function(t,a){return r.a.createElement("span",null,e.formatDate(a.CreatedOn))}}];return r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:14}},{onSubmit:this.handleSubmit}),r.a.createElement(L.a.Item,{label:"Request Status",hasFeedback:!0},t("RequestStatus",{rules:[{required:!1,message:"Please select status!"}]})(r.a.createElement(M.a,{placeholder:"Please select a status"},r.a.createElement(Ge,{key:"To Do",value:"To Do"}," To Do "),r.a.createElement(Ge,{key:"In Progress",value:"In Progress"}," In Progress "),r.a.createElement(Ge,{key:"Done",value:"Done"}," Done ")))),r.a.createElement(L.a.Item,{label:"Remarks"},t("Comment",{rules:[{required:!1,message:"Please input your Remarks!",whitespace:!0}]})(r.a.createElement(Je,{rows:2}))),r.a.createElement(L.a.Item,{label:"Documents"},t("Documents",{valuePropName:"fileList",getValueFromEvent:this.normFile})(r.a.createElement(G.a,{name:"logo",action:"".concat(y,"/Requests/PostFormData")},r.a.createElement(_.a,null,r.a.createElement(N.a,{type:"upload"})," Click to upload")))),r.a.createElement(L.a.Item,{wrapperCol:{span:6,offset:18}},r.a.createElement(_.a,{type:"secondary",style:{marginRight:"15px"},disabled:this.state.spinning,onClick:function(t){e.props.form.resetFields(),e.props.handleOk()}},"CANCEL"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.spinning,disabled:this.state.spinning},"ADD"))),r.a.createElement(P.a,null),this.props.request.RepresentativeComments.length?null:r.a.createElement("h3",{style:{textAlign:"center"}},"----  No Prior Actions Available  ----"),this.props.request.RepresentativeComments.length?r.a.createElement(he.a,{pagination:!1,dataSource:this.props.request.RepresentativeComments,columns:a}):null)}}]),t}(r.a.Component),He=L.a.create({name:"validate_other"})(_e),ze=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).columns=[{title:"Ticket No.",dataIndex:"TicketNumber",key:"TicketNumber"},{title:"Benefits",dataIndex:"IssueCategory",key:"IssueCategory"},{title:"Description",dataIndex:"Description",key:"Description",width:150,render:function(e){return r.a.createElement(pe.a,{title:e},r.a.createElement("span",null,e))}},{title:"Budget",dataIndex:"Estimatedbudget",key:"Estimatedbudget"},{title:"Created By",dataIndex:"EmailAddress",key:"EmailAddress"},{title:"Constituency",dataIndex:"Constituency",key:"Constituency"},{title:"Created Date",dataIndex:"CreatedOn",key:"CreatedOn",render:function(e){return r.a.createElement("span",null,new Date(e).toISOString().slice(0,19).replace(/-/g,"/").replace("T"," "))}},{title:"Actions",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(_.a,{type:"link",icon:"eye",style:{fontSize:"20px"},onClick:function(){a.showReqInfoModal(t)}}),r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",icon:"message",style:{fontSize:"20px"},onClick:function(){a.showReqCommentsModal(t)}})),!a.state.approveAction||"REPRESENTATIVE"!==a.props.currentUser.Role&&"INCHARGE"!==a.props.currentUser.Role?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",style:{fontSize:"20px"},icon:"like",onClick:function(){a.showActionsModal(t,"approve")}})," "),!a.state.declineAction||"REPRESENTATIVE"!==a.props.currentUser.Role&&"INCHARGE"!==a.props.currentUser.Role?null:r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",style:{fontSize:"20px"},icon:"dislike",onClick:function(){a.showActionsModal(t,"decline")}})," "),a.state.submitAction&&"EMPLOYEE"===a.props.currentUser.Role?r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",style:{fontSize:"20px"},icon:"form",onClick:function(){a.showActionsModal(t,null)}})," "):null,a.state.sponsorAction&&"ADMIN"===a.props.currentUser.Role?r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",style:{fontSize:"20px"},icon:"form",onClick:function(){a.showActionsModal(t,null)}})," "):null,"REPRESENTATIVE"===a.props.currentUser.Role&&a.props.viewIncApproved?r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{type:"vertical"})," ",r.a.createElement(_.a,{type:"link",style:{fontSize:"20px"},icon:"plus-square",onClick:function(){a.showExclusiveRepModal(t,"decline")}})," "):null)}}],a.showReqInfoModal=function(e){a.setState({showRequestInfo:!0,selectedRequest:e})},a.showReqCommentsModal=function(e){a.setState({showRequestComments:!0,selectedRequest:e})},a.showExclusiveRepModal=function(e){a.setState({showRepTodos:!0,selectedRequest:e})},a.showActionsModal=function(e,t){a.setState({selectedRequest:e,action:t,actionsView:!0})},a.handleOk=function(e){a.setState({showRequestInfo:!1,showRequestComments:!1,showRepTodos:!1,actionsView:!1})},a.handleCancel=function(e){a.setState({showRequestInfo:!1,showRequestComments:!1,showRepTodos:!1,actionsView:!1})},a.handlePageChange=function(e,t){console.log("handlePageChange:",e,t),a.fetchRequests(e,t)},a.handlePageSizeChange=function(e,t){console.log("handlePageSizeChange:",e,t),a.fetchRequests(e,t)},a.state={showRequestInfo:!1,showRequestComments:!1,showRepTodos:!1,actionsView:!1,columns:[],approveAction:!1,declineAction:!1,submitAction:!1,sponsorAction:!1,selectedRequest:{},action:"",loading:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.setActions()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.setActions()}},{key:"setActions",value:function(){switch(this.props.location.pathname.slice(1).toUpperCase()){case"TOTAL":this.setState({approveAction:!1,declineAction:!1,submitAction:!1,sponsorAction:!1});break;case"APPROVED":this.setState({approveAction:!1,declineAction:!1,submitAction:!1,sponsorAction:!0});break;case"DECLINED":this.setState({approveAction:!0,declineAction:!1,submitAction:!0,sponsorAction:!1});break;case"PENDING":this.setState({approveAction:!0,declineAction:!0,submitAction:!0,sponsorAction:!0});break;default:this.setState({approveAction:!1,declineAction:!1,submitAction:!1,sponsorAction:!1})}}},{key:"fetchRequests",value:function(e,t){var a=this,n=this.props.location.pathname.slice(1).toUpperCase();this.setState({loading:!0}),k.getRequests({reqStatus:n,index:e,count:t}).then(function(e){a.props.setRequests(e.Results),a.props.setRequestsCount(e.RecordCount),a.setState({loading:!1})},function(e){console.log("Error while fetching requests:",e),a.setState({loading:!1})})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{size:"large",spinning:this.props.loading||this.state.loading},r.a.createElement(he.a,{columns:this.columns,dataSource:this.props.requests,pagination:{defaultPageSize:5,onShowSizeChange:this.handlePageSizeChange,showSizeChanger:!0,onChange:this.handlePageChange,total:this.props.requestsCount,pageSizeOptions:["5","10","15","20","30"]}})),r.a.createElement(H.a,{title:"".concat(this.state.selectedRequest.TicketNumber),visible:this.state.showRequestInfo,footer:null,onCancel:this.handleCancel},r.a.createElement(Ee,{request:this.state.selectedRequest,handleOk:this.handleOk})),r.a.createElement(H.a,{title:"".concat(this.state.selectedRequest.TicketNumber),visible:this.state.showRequestComments,footer:null,width:900,onCancel:this.handleCancel},r.a.createElement(Be,{request:this.state.selectedRequest,handleOk:this.handleOk})),r.a.createElement(H.a,{title:"".concat(this.state.selectedRequest.TicketNumber),visible:this.state.showRepTodos,footer:null,width:800,onCancel:this.handleCancel},r.a.createElement(He,{request:this.state.selectedRequest,handleOk:this.handleOk})),r.a.createElement(H.a,{title:"".concat(this.state.selectedRequest.TicketNumber),visible:this.state.actionsView,footer:null,onCancel:this.handleCancel},"EMPLOYEE"===this.props.currentUser.Role?r.a.createElement(Ce,{action:this.state.action,request:this.state.selectedRequest,handleOk:this.handleOk,handleCancel:this.handleCancel}):"REPRESENTATIVE"===this.props.currentUser.Role?r.a.createElement(Ae,{action:this.state.action,request:this.state.selectedRequest,handleOk:this.handleOk,handleCancel:this.handleCancel}):"INCHARGE"===this.props.currentUser.Role?r.a.createElement(Fe,{action:this.state.action,request:this.state.selectedRequest,handleOk:this.handleOk,handleCancel:this.handleCancel}):r.a.createElement(Me,{action:this.state.action,request:this.state.selectedRequest,handleOk:this.handleOk,handleCancel:this.handleCancel})))}}]),t}(r.a.Component),Qe=Object(u.b)(function(e){return{requests:e.requests,requestsCount:e.requestsCount,currentUser:e.currentUser}},function(e){return{setRequests:function(t){e(se(t))},setRequestsCount:function(t){e(re(t))}}})(Object(E.g)(ze)),We=a(121),Ye=a(425),Ke=Ye.a.Panel,Xe=M.a.Option,Ze=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(console.log("Received values of form: ",t),t.reqStatus=a.props.location.pathname.slice(1).toUpperCase(),a.fetchRequests(t))})},a.onDistrictChange=function(e){S.getMandals(e).then(function(e){a.setState({mandals:e})},function(e){console.log("Error while fetching Mandals:",e)})},a.onMandalChange=function(e){S.getVillages(e).then(function(e){a.setState({villages:e})},function(e){console.log("Error while fetching Villages:",e)})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.state={confirmDirty:!1,districts:[],constituencies:[],mandals:[],villages:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.getDistricts().then(function(t){e.setState({districts:t})},function(e){console.log("Error while fetching Districts:",e)}),S.getConstituencies().then(function(t){e.setState({constituencies:t})},function(e){console.log("Error while fetching Constituencies:",e)})}},{key:"componentDidMount",value:function(){this.props.form.validateFields()}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&this.props.form.resetFields()}},{key:"fetchRequests",value:function(e){var t=this;this.setState({loading:!0}),k.getRequests(e).then(function(e){t.props.setRequests(e.Results),t.props.setRequestsCount(e.RecordCount),t.setState({loading:!1})},function(e){console.log("Error while fetching requests:",e),t.setState({loading:!1})})}},{key:"render",value:function(){var e,t=this,a=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{defaultActiveKey:["1"]},r.a.createElement(Ke,{header:"Advanced Filter",key:"1"},r.a.createElement(L.a,{layout:"inline",onSubmit:this.handleSubmit},r.a.createElement(L.a.Item,{label:"District"},a("DistrictID")(r.a.createElement(M.a,(e={placeholder:"Select District",onChange:this.onDistrictChange,style:{width:"180px"},showSearch:!0},Object(We.a)(e,"onChange",this.onDistrictChange),Object(We.a)(e,"optionFilterProp","children"),Object(We.a)(e,"filterOption",function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}),e),this.state.districts.map(function(e){return r.a.createElement(Xe,{key:e.DistrictID,value:e.DistrictID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Constituency"},a("ConstituencyID")(r.a.createElement(M.a,{placeholder:"Select Constituency",style:{width:"180px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.constituencies.map(function(e){return r.a.createElement(Xe,{key:e.ConstituencyID,value:e.ConstituencyID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Mandal"},a("MandalID")(r.a.createElement(M.a,{placeholder:"Select Mandal",onChange:this.onMandalChange,style:{width:"180px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.mandals.map(function(e){return r.a.createElement(Xe,{key:e.MandalID,value:e.MandalID},e.Name)})))),r.a.createElement(L.a.Item,{label:"Village"},a("VillageID")(r.a.createElement(M.a,{placeholder:"Select Village",style:{width:"180px"},showSearch:!0,optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},this.state.villages.map(function(e){return r.a.createElement(Xe,{key:e.VillageID,value:e.VillageID},e.Name)})))),r.a.createElement(L.a.Item,null,r.a.createElement(_.a,{type:"secondary",onClick:function(e){t.props.form.resetFields()},style:{marginRight:"15px"},disabled:this.state.loading},"Clear"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",loading:this.state.loading,disabled:this.state.loading},"Search"))))))}}]),t}(r.a.Component),$e=L.a.create({name:"validate_other"})(Ze),et=Object(u.b)(function(e){return{}},function(e){return{setRequests:function(t){e(se(t))},setRequestsCount:function(t){e(re(t))}}})(Object(E.g)($e)),tt=j.a.Search,at=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).onIncApproved=function(e){e.target.checked?(a.setState({viewIncApproved:!0}),a.fetchRequests(null,"INC_APPROVED","INCHARGE","active"!==a.state.showReqByStatus)):(a.setState({viewIncApproved:!1}),a.fetchRequests(null,null,null,"active"!==a.state.showReqByStatus))},a.toggleShow=function(e){a.setState({showReqByStatus:e.target.value}),"active"==e.target.value?a.fetchRequests(null,a.state.viewIncApproved?"INC_APPROVED":null,a.state.viewIncApproved?"INCHARGE":null,!1):a.fetchRequests(null,a.state.viewIncApproved?"INC_APPROVED":null,a.state.viewIncApproved?"INCHARGE":null,!0)},a.state={loading:!1,viewIncApproved:!1,showReqByStatus:"active"},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.fetchRequests(null,null,null,!1)}},{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&(this.setState({viewIncApproved:!1}),this.setState({showReqByStatus:"active"}),this.fetchRequests(null,null,null,!1))}},{key:"fetchRequests",value:function(e,t,a,n){var r=this,s=this.props.location.pathname.slice(1).toUpperCase();this.setState({loading:!0}),k.getRequests({reqStatus:s,TicketNumber:e,Status:t,Role:a,InActive:n}).then(function(e){r.props.setRequests(e.Results),r.props.setRequestsCount(e.RecordCount),r.setState({loading:!1})},function(e){console.log("Error while fetching requests:",e),r.setState({loading:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{style:{textTransform:"capitalize"}},this.props.location.pathname.slice(1)," Requests",r.a.createElement(_.a,{type:"link",size:"large",icon:"reload",style:{marginLeft:"15px"},onClick:function(t){e.fetchRequests(null,null,null)}})),r.a.createElement(et,null),r.a.createElement("div",{style:{textAlign:"right",margin:"10px 0px"}},r.a.createElement(L.a,{layout:"inline"},r.a.createElement(L.a.Item,null,r.a.createElement(B.a.Group,{value:this.state.showReqByStatus,buttonStyle:"solid",onChange:this.toggleShow},r.a.createElement(B.a.Button,{value:"active"},"All"),r.a.createElement(B.a.Button,{value:"inactive"},"InActive"))),r.a.createElement(L.a.Item,null,"approved"==this.props.location.pathname.slice(1)&&"REPRESENTATIVE"==this.props.currentUser.Role?r.a.createElement(J.a,{onChange:this.onIncApproved},"Incharge Approved"):null),r.a.createElement(L.a.Item,{label:"Count"},r.a.createElement("span",{className:"ant-form-text"},this.props.requestsCount)),r.a.createElement(L.a.Item,{label:"Search"},r.a.createElement(tt,{placeholder:"Search Ticket",onSearch:function(t){return e.fetchRequests(t,null,null)},style:{width:200}})))),r.a.createElement(Qe,{requests:this.props.requests,loading:this.state.loading,viewIncApproved:this.state.viewIncApproved}))}}]),t}(r.a.Component),nt=Object(u.b)(function(e){return{requests:e.requests,requestsCount:e.requestsCount,currentUser:e.currentUser}},function(e){return{setRequests:function(t){e(se(t))},setRequestsCount:function(t){e(re(t))}}})(Object(E.g)(at)),rt=a(423),st={0:"Open",33:"Verified",66:"In Progress",100:"Done"},lt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),a.setState({ticket:t.TicketNumber}),k.getRequests(t).then(function(e){console.log("response:",e,t.TicketNumber),a.setState({selectedRequest:e.Results[0]})},function(e){console.log("Error while fetching request:",e)}))})},a.normFile=function(e){return console.log("Upload event:",e),Array.isArray(e)?e:e&&e.fileList},a.handleOk=function(e){a.setState({selectedRequest:{},ticket:""})},a.state={selectedRequest:{},ticket:""},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Track Request"),r.a.createElement(L.a,{layout:"inline",onSubmit:this.handleSubmit,style:{textAlign:"center"}},r.a.createElement(L.a.Item,{label:"Ticket Number",hasFeedback:!0},e("TicketNumber",{rules:[{required:!0,message:"Please input Ticket Number!"}]})(r.a.createElement(j.a,{placeholder:"Input Ticket Number",autoComplete:"off"}))),r.a.createElement(L.a.Item,{wrapperCol:{span:8,offset:16}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"SUBMIT")),r.a.createElement(P.a,null),this.state.ticket&&"USER"===this.props.currentUser.Role?r.a.createElement(rt.a,{marks:st,defaultValue:66,style:{width:"70%",margin:"15%"}}):null,this.state.ticket&&this.state.selectedRequest&&"ADMIN"==this.props.currentUser.Role?r.a.createElement(Be,{request:this.state.selectedRequest,handleOk:this.handleOk}):null,this.state.ticket&&"USER"===this.props.currentUser.Role?r.a.createElement(L.a.Item,{label:"Estimated Completion"},r.a.createElement("span",{className:"ant-form-text"},"16.08.2019 Friday 12:00 PM")):null))}}]),t}(r.a.Component),ot=L.a.create({name:"validate_other"})(lt),it=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(ot),ct=a(217),ut=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{}})(function(e){var t=e.component,a=e.roles,n=Object(ct.a)(e,["component","roles"]);return r.a.createElement(E.b,Object.assign({},n,{render:function(e){var n=v.currentUserValue;return n?a&&-1===a.indexOf(n.Role)?r.a.createElement(E.a,{to:{pathname:"/"}}):r.a.createElement(t,e):r.a.createElement(E.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}),mt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={spinning:!1},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),a.setState({spinning:!0}),v.login(t.username,t.password).then(function(e){a.props.setCurrentUser(e),a.setState({spinning:!1});var t=(a.props.location.state||{from:{pathname:"/"}}).from;a.props.history.push(t)},function(e){console.log("ERROR:",e),a.setState({spinning:!1}),"Bad Request"===e?ge.a.error("Invalid Username or Password"):ge.a.error("Sorry not able to login. Please try again!")}))})},a.loginAsUser=function(){var e={Username:"user@magunta.in",FirstName:"USER",LastName:"1",Password:"",RoleID:5,Role:"USER",Token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1bmlxdWVfbmFtZSI6InVzZXJAbWFndW50YS5pbiIsIm5iZiI6MTU2ODU0MDYxOSwiZXhwIjoxNTY5MTQ1NDE5LCJpYXQiOjE1Njg1NDA2MjAsImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6NTAxOTEiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjUwMTkxIn0.LD-6LzZXl4qCikjJTxJmo0RzGcb42jn17kQ2ihSeXAU",UserID:8};v.loginAsUser(e),a.props.setCurrentUser(e);(a.props.location.state||{from:{pathname:"/"}}).from;a.props.history.push("/new-request")},a.props.currentUser&&a.props.history.push("/"),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("img",{src:a(413),alt:"logo",style:{width:"30%"}})),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(L.a,{onSubmit:this.handleSubmit,className:"login-form",style:{display:"inline-block"}},r.a.createElement(L.a.Item,null,t("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(N.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",autoComplete:"off"}))),r.a.createElement(L.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(j.a,{prefix:r.a.createElement(N.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(L.a.Item,null,t("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(J.a,{className:"login-form-remember"},"Remember me")),r.a.createElement("span",{className:"login-form-forgot"},"Forgot password"),r.a.createElement(_.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:this.state.spinning,disabled:this.state.spinning},"Log in")))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(_.a,{type:"link",className:"login-form-button",onClick:function(){e.loginAsUser()}},"Proceed as a USER")))}}]),t}(r.a.Component),pt=L.a.create({name:"normal_login"})(mt),dt=Object(u.b)(function(e){return{}},function(e){return{setCurrentUser:function(t){e(function(e){return{type:ae,currentUser:e}}(t))}}})(pt),ht=function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"404 - Page Not Found Error"))},ft=M.a.Option,Et=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,roles:[]},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFieldsAndScroll(function(e,t){e||(console.log("Received values of form: ",JSON.stringify(t)),I.createUser(t).then(function(e){ge.a.success("User Created Successfully")},function(e){console.log("Error while creating User:",e)}))})},a.handleConfirmBlur=function(e){var t=e.target.value;a.setState({confirmDirty:a.state.confirmDirty||!!t})},a.validateToNextPassword=function(e,t,n){var r=a.props.form;t&&a.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;S.getRoles().then(function(t){e.setState({roles:t})},function(e){console.log("Error while fetching Roles:",e)})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(L.a,Object.assign({},{labelCol:{lg:{span:4},xs:{span:24},sm:{span:8}},wrapperCol:{lg:{span:10},xs:{span:24},sm:{span:16}}},{onSubmit:this.handleSubmit}),r.a.createElement("h2",null," Create User"),r.a.createElement(P.a,null),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"First Name")},e("FirstName",{rules:[{required:!0,message:"Please input your firstname!",whitespace:!0}]})(r.a.createElement(j.a,{placeholder:"Please input firstname"}))),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Last Name")},e("LastName",{rules:[{required:!0,message:"Please input your lastname!",whitespace:!0}]})(r.a.createElement(j.a,{placeholder:"Please input lastname"}))),r.a.createElement(L.a.Item,{label:"Role",hasFeedback:!0},e("RoleID",{rules:[{required:!0,message:"Please select role!"}]})(r.a.createElement(M.a,{placeholder:"Please select a role"},this.state.roles.map(function(e){return r.a.createElement(ft,{key:e.RoleID,value:e.RoleID},e.RoleName)})))),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"User Name")},e("Username",{rules:[{required:!0,message:"Please input username!",whitespace:!0}]})(r.a.createElement(j.a,{placeholder:"Please input username"}))),r.a.createElement(L.a.Item,{label:r.a.createElement("span",null,"Password")},e("Password",{rules:[{required:!0,message:"Please input password!",whitespace:!0}]})(r.a.createElement(j.a,{placeholder:"Please input password"}))),r.a.createElement(L.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:12,offset:12}}},r.a.createElement(_.a,{type:"primary",htmlType:"submit"},"SUBMIT")))}}]),t}(r.a.Component),gt=L.a.create({name:"validate_other"})(Et),yt=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).editUser=function(e){console.log("EDIT:",e)},a.deleteUser=function(e){console.log("DELETE:",e)},a.columns=[{title:"User ID",width:200,dataIndex:"UserId",key:"UserId"},{title:"First Name",dataIndex:"FirstName",key:"FirstName",width:120},{title:"Last Name",dataIndex:"LastName",key:"LastName",width:150},{title:"User Name",dataIndex:"Username",key:"Username",width:150},{title:"Role",dataIndex:"Role",key:"Role",width:150,render:function(e){return r.a.createElement("span",null,e.RoleName)}},{title:"Action",key:"action",render:function(e){return r.a.createElement("span",null,r.a.createElement(_.a,{type:"link",style:{color:"blue"},onClick:function(){a.editUser(e.UserId)}}," EDIT "),r.a.createElement(P.a,{type:"vertical"}),r.a.createElement(_.a,{type:"link",style:{color:"brown"},onClick:function(){a.deleteUser(e.UserId)}}," DELETE "))}}],a.state={users:[]},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this;I.getUsers().then(function(t){e.setState({users:t})},function(e){console.log("Error while fetching Users:",e)})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{columns:this.columns,dataSource:this.state.users,pagination:{defaultPageSize:5,showSizeChanger:!0,pageSizeOptions:["5","10","15","20","30"]}}))}}]),t}(r.a.Component),bt=(a(414),Z.a.Content),vt=function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.getCurrentUser()}},{key:"render",value:function(){return r.a.createElement(E.c,{history:O},r.a.createElement(Z.a,null,this.props.currentUser&&r.a.createElement(ie,null),r.a.createElement(Z.a,null,this.props.currentUser&&r.a.createElement(me,null),r.a.createElement(Z.a,{style:{padding:"0 24px 24px"}},r.a.createElement(bt,{style:{background:"#fff",padding:18,margin:"16px 0px 0px 0px",minHeight:280}},r.a.createElement(E.d,null,r.a.createElement(ut,{exact:!0,path:"/",roles:["USER","EMPLOYEE","INCHARGE","REPRESENTATIVE","ADMIN","SPONSORSHIP"],component:X}),r.a.createElement(ut,{path:"/total",roles:["EMPLOYEE","INCHARGE","REPRESENTATIVE","ADMIN","SPONSORSHIP"],component:nt}),r.a.createElement(ut,{path:"/declined",roles:["EMPLOYEE","INCHARGE","REPRESENTATIVE","ADMIN","SPONSORSHIP"],component:nt}),r.a.createElement(ut,{path:"/approved",roles:["EMPLOYEE","INCHARGE","REPRESENTATIVE","ADMIN","SPONSORSHIP"],component:nt}),r.a.createElement(ut,{path:"/pending",roles:["EMPLOYEE","INCHARGE","REPRESENTATIVE","ADMIN","SPONSORSHIP"],component:nt}),r.a.createElement(ut,{path:"/new-request",roles:["USER"],component:K}),r.a.createElement(ut,{path:"/track-request",roles:["USER","ADMIN"],component:it}),r.a.createElement(ut,{path:"/create-user",roles:["ADMIN"],component:gt}),r.a.createElement(ut,{path:"/show-users",roles:["ADMIN"],component:yt}),r.a.createElement(E.b,{path:"/login",component:dt}),r.a.createElement(E.b,{component:ht})))))))}}]),t}(r.a.Component),It=Object(u.b)(function(e){return{currentUser:e.currentUser}},function(e){return{getCurrentUser:function(){e(function(){var e=v.currentUserValue;return{type:te,currentUser:e}}())}}})(vt);var kt=Object(o.combineReducers)({currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:case ae:case ne:return t.currentUser;default:return e}},requests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_REQUESTS":return t.requests;default:return e}},requestsCount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_REQUESTS_COUNT":return t.requestsCount;default:return e}}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var St=Object(o.createStore)(kt,Object(i.composeWithDevTools)(Object(o.applyMiddleware)(c.a)));l.a.render(r.a.createElement(u.a,{store:St},r.a.createElement(It,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[220,1,2]]]);
//# sourceMappingURL=main.2bc27789.chunk.js.map